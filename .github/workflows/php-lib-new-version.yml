name: NEW - VERSION - PHP - LIB
on:
    workflow_call:
      secrets:
       git_token:
        description: 'token to use to create the tag'
        required: true
jobs:
  php_lib:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Install jq
      run: sudo apt-get install -y jq
    - name: Get version from composer.json
      id: get_version
      run: |
        VERSION=$(jq -r '.version' composer.json)
        echo "::set-output name=version::$VERSION"
    - name: Create GitHub tag
      uses: laputansoft/github-tag-action@v4.6
      with:
        github_token: ${{  secrets.git_token }}
        tag: ${{ steps.get_version.outputs.version }}